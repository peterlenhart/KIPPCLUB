<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FAIRY KIPP</title>
  <style>
    :root {
      --blue: #0065ab;      /* 0/101/171 */
      --violet: #aa0078;    /* 170/0/120 */
      --green: #3ba52b;     /* 59/165/43 */
      --orange: #f29600;    /* 242/150/0 */
      --light-mint: #bfd4bc;/* 191/212/188 */
      --bg-dark: #05070b;
      --card-dark: #11141c;
      --text-main: #f5f5f5;
      --text-muted: #a5acb8;
      --border-soft: #262b35;
      --shadow-soft: 0 12px 30px rgba(0, 0, 0, 0.6);
      --radius-lg: 18px;
      --radius-xl: 26px;
      --transition-fast: 0.18s ease-out;
    }

    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: radial-gradient(circle at top, #141b24 0, var(--bg-dark) 52%);
      color: var(--text-main);
      display: flex;
      justify-content: center;
      align-items: stretch;
      min-height: 100vh;
    }

    .app {
      width: 100%;
      max-width: 480px;
      padding: 16px 14px 20px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }

    .title-block {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .title {
      font-size: 1.4rem;
      font-weight: 800;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--light-mint);
    }

    .subtitle {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .stats {
      display: flex;
      gap: 8px;
    }

    .stat-chip {
      background: rgba(21, 27, 38, 0.95);
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      padding: 6px 10px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      min-width: 88px;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.35);
    }

    .stat-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-muted);
    }

    .stat-value {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--orange);
      margin-top: 1px;
    }

    main {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 4px;
    }

    .story-card {
      flex: 1;
      background: linear-gradient(135deg, #0f141c, #05070b);
      border-radius: var(--radius-xl);
      border: 1px solid var(--border-soft);
      box-shadow: var(--shadow-soft);
      padding: 16px 16px 18px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      position: relative;
      overflow: hidden;
    }

    .story-card::before {
      content: "";
      position: absolute;
      inset: -80px;
      background:
        radial-gradient(circle at 20% -10%, rgba(0, 101, 171, 0.23), transparent 55%),
        radial-gradient(circle at 120% 120%, rgba(242, 150, 0, 0.22), transparent 55%);
      opacity: 0.9;
      pointer-events: none;
    }

    .story-inner {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .story-tag-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.72rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--text-muted);
    }

    .story-tag {
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(191, 212, 188, 0.5);
      background: rgba(5, 7, 11, 0.7);
      color: var(--light-mint);
    }

    .story-progress {
      display: flex;
      gap: 4px;
    }

    .dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.35);
      background: transparent;
      opacity: 0.5;
    }

    .dot.active {
      background: var(--orange);
      border-color: transparent;
      opacity: 1;
    }

    #storyText {
      font-size: 0.98rem;
      line-height: 1.45;
      color: var(--text-main);
      min-height: 132px;
      white-space: pre-wrap;
    }

    .story-footer {
      position: relative;
      z-index: 1;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .color-pill {
      padding: 3px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.18);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .color-dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: linear-gradient(135deg, var(--blue), var(--green));
    }

    .main-actions {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 6px;
    }

    .btn {
      border-radius: var(--radius-lg);
      border: none;
      padding: 13px 14px;
      font-size: 1rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      cursor: pointer;
      transition: transform var(--transition-fast), box-shadow var(--transition-fast),
        background-color var(--transition-fast), opacity var(--transition-fast);
      display: inline-flex;
      justify-content: center;
      align-items: center;
      width: 100%;
    }

    .btn:active {
      transform: translateY(1px) scale(0.99);
      box-shadow: none;
    }

    .btn-primary {
      background: var(--blue);
      color: #ffffff;
      box-shadow: 0 10px 22px rgba(0, 101, 171, 0.6);
    }

    .btn-primary:disabled {
      opacity: 0.5;
      box-shadow: none;
      cursor: default;
    }

    .btn-secondary {
      background: #171c24;
      color: var(--light-mint);
      border: 1px solid var(--border-soft);
    }

    .btn-secondary-quiet {
      background: #11141c;
      color: var(--text-muted);
      border: 1px solid #262b35;
    }

    .score-buttons {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    @media (min-width: 420px) {
      .score-buttons {
        flex-direction: row;
      }

      .btn {
        padding-block: 12px;
      }
    }

    .badge-value {
      font-weight: 700;
      color: var(--orange);
    }

    .badge-muted {
      color: var(--text-muted);
      font-weight: 500;
      font-size: 0.8rem;
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="title-block">
        <div class="title">FAIRY KIPP</div>
        <div class="subtitle">Kipp den Würfel – fang die Fairytale.</div>
      </div>
      <div class="stats">
        <div class="stat-chip">
          <span class="stat-label">Fairy-Punkte</span>
          <span class="stat-value" id="pointsDisplay">0</span>
        </div>
        <div class="stat-chip">
          <span class="stat-label">Erzählte Fairies</span>
          <span class="stat-value" id="storiesDisplay">0</span>
        </div>
      </div>
    </header>

    <main>
      <section class="story-card">
        <div class="story-inner">
          <div class="story-tag-row">
            <span class="story-tag" id="storyTag">Tippe auf FAIRY, um zu starten</span>
            <div class="story-progress" id="storyDots">
              <!-- Punkte werden dynamisch gefüllt -->
            </div>
          </div>
          <div id="storyText">
            Willkommen bei FAIRY KIPP.  
Tippe unten auf FAIRY, um eine neue Geschichte zu erhalten.
          </div>
        </div>
        <div class="story-footer">
          <span class="badge-muted" id="hintText">Du bist der Erzähler.</span>
          <span class="color-pill">
            <span class="color-dot"></span>
            <span class="badge-muted">Blau · Violett · Grün · Orange</span>
          </span>
        </div>
      </section>

      <section class="main-actions">
        <button id="fairyButton" class="btn btn-primary">
          FAIRY
        </button>

        <button id="nextSentenceButton" class="btn btn-secondary" style="display: none;">
          Weiter
        </button>

        <div id="scoreButtons" class="score-buttons" style="display: none;">
          <button id="btnSelf" class="btn btn-primary">
            Selbst gekippt <span class="badge-value">+3</span>
          </button>
          <button id="btnOther" class="btn btn-secondary">
            Mitspieler gekippt <span class="badge-value">+2</span>
          </button>
          <button id="btnAuto" class="btn btn-secondary-quiet">
            Schon gelegen <span class="badge-value">+1</span>
          </button>
        </div>
      </section>
    </main>
  </div>

  <script>
    // Basiskonfiguration
    const motives = [
      "Wasserball",
      "Auto",
      "Farbfleck",
      "Buch",
      "Gießkanne",
      "Kerze",
      "Blume",
      "Fisch",
      "Schmetterling",
      "Schuh",
      "Tasse",
      "T-Shirt"
    ];

    const colors = ["Blau", "Violett", "Orange", "Grün"];

    const moods = [
      "neugierig",
      "ein bisschen ängstlich",
      "abenteuerlustig",
      "träumerisch",
      "sehr müde",
      "ungewöhnlich mutig",
      "ein wenig verloren",
      "heimlich aufgeregt"
    ];

    const places = [
      "am Rand eines alten Waldes",
      "auf einem stillen Dachboden",
      "in einem kleinen Zauberladen",
      "neben einem verwunschenen See",
      "auf einem leeren Spielplatz",
      "mitten in einer funkelnden Stadt",
      "auf dem Fensterbrett eines Kinderzimmers",
      "in einem vergessenen Regal der Schulbibliothek"
    ];

    const events = [
      "hörte plötzlich ein leises Flüstern",
      "bekam unerwartet Besuch von einer winzigen Fee",
      "rollte ein Stück weiter und entdeckte etwas Seltsames",
      "spürte, wie eine warme Brise durch den Raum zog",
      "bemerkte, dass die Schatten um ihn herum leiser wurden",
      "fand eine kleine, glitzernde Spur auf dem Boden",
      "spürte, wie jemand vorsichtig danach griff",
      "bemerkte, dass heute irgendetwas anders war als sonst"
    ];

    const endings = [
      "wusste, dass heute ein besonderer Abend war",
      "fühlte sich zum ersten Mal nicht mehr allein",
      "hatte plötzlich keine Angst mehr vor der Dunkelheit",
      "spürte, wie ein kleines Lächeln über sein Gesicht wanderte",
      "merkte, dass alle Gedanken plötzlich ganz leicht wurden",
      "hörte in sich ein leises Kichern, das nach Abenteuer klang"
    ];

    let currentStorySentences = [];
    let currentSentenceIndex = 0;
    let points = 0;
    let storiesTold = 0;

    const fairyButton = document.getElementById("fairyButton");
    const nextSentenceButton = document.getElementById("nextSentenceButton");
    const scoreButtons = document.getElementById("scoreButtons");
    const storyText = document.getElementById("storyText");
    const storyTag = document.getElementById("storyTag");
    const storyDots = document.getElementById("storyDots");
    const pointsDisplay = document.getElementById("pointsDisplay");
    const storiesDisplay = document.getElementById("storiesDisplay");
    const hintText = document.getElementById("hintText");

    const btnSelf = document.getElementById("btnSelf");
    const btnOther = document.getElementById("btnOther");
    const btnAuto = document.getElementById("btnAuto");

    function randomItem(array) {
      return array[Math.floor(Math.random() * array.length)];
    }

    function buildStory() {
      const motive = randomItem(motives);
      const color = randomItem(colors);
      const mood = randomItem(moods);
      const place = randomItem(places);
      const event = randomItem(events);
      const ending = randomItem(endings);

      const sentences = [];

      sentences.push(
        `Es war einmal ein ${motive}, der ${mood} ${place} lag.`
      );
      sentences.push(
        `Schon den ganzen Tag über hatte der ${motive} das Gefühl, dass etwas Besonderes passieren würde.`
      );
      sentences.push(
        `Plötzlich ${event}, und der ${motive} hielt den Atem an.`
      );
      sentences.push(
        `In diesem Moment ${ending}.`
      );
      sentences.push(
        `Als der Zauber verklang, leuchtete der ${motive} klar und deutlich in ${color}.`
      );

      // 4–5 Sätze sind genug – wir nehmen hier bewusst 5.
      // Wichtig: letztes Wort = Farbe
      // (steht ohnehin am Satzende als "... in FARBE.")
      return {
        sentences,
        motive,
        color
      };
    }

    function renderDots(total, activeIndex) {
      storyDots.innerHTML = "";
      for (let i = 0; i < total; i++) {
        const d = document.createElement("div");
        d.className = "dot" + (i <= activeIndex ? " active" : "");
        storyDots.appendChild(d);
      }
    }

    function showCurrentSentence() {
      const total = currentStorySentences.length;
      storyText.textContent = currentStorySentences[currentSentenceIndex];
      renderDots(total, currentSentenceIndex);

      if (currentSentenceIndex === total - 1) {
        // letzte Zeile
        nextSentenceButton.style.display = "none";
        scoreButtons.style.display = "flex";
        hintText.textContent =
          "Jetzt entscheidet ihr: Wer hat die Fairy gekippt?";
      } else {
        nextSentenceButton.style.display = "inline-flex";
        scoreButtons.style.display = "none";
        hintText.textContent = "Lies die Fairy weiter.";
      }
    }

    function startNewStory() {
      const story = buildStory();
      currentStorySentences = story.sentences;
      currentSentenceIndex = 0;

      storiesTold++;
      storiesDisplay.textContent = storiesTold.toString();

      storyTag.textContent = `Neue Fairy mit ${story.motive}`;
      hintText.textContent = "Du bist der Erzähler – lies die Fairy vor.";
      showCurrentSentence();

      fairyButton.disabled = true;
    }

    fairyButton.addEventListener("click", () => {
      startNewStory();
    });

    nextSentenceButton.addEventListener("click", () => {
      if (currentSentenceIndex < currentStorySentences.length - 1) {
        currentSentenceIndex++;
        showCurrentSentence();
      }
    });

    function finishStoryWithPoints(addPoints, reasonText) {
      points += addPoints;
      pointsDisplay.textContent = points.toString();

      storyText.textContent =
        reasonText + "\n\nTippe auf FAIRY, um die nächste Geschichte zu holen.";
      storyTag.textContent = "Fairy abgeschlossen";
      storyDots.innerHTML = "";
      scoreButtons.style.display = "none";
      nextSentenceButton.style.display = "none";
      fairyButton.disabled = false;
      hintText.textContent = "Nächste Fairy wartet auf dich.";
    }

    btnSelf.addEventListener("click", () => {
      finishStoryWithPoints(
        3,
        "Du hast deine eigene Fairy gekippt. Das bringt dir 3 Fairy-Punkte."
      );
    });

    btnOther.addEventListener("click", () => {
      finishStoryWithPoints(
        2,
        "Ein Mitspieler hat deine Fairy gekippt. Das bringt dir 2 Fairy-Punkte."
      );
    });

    btnAuto.addEventListener("click", () => {
      finishStoryWithPoints(
        1,
        "Die Fairy lag schon aufgelegt richtig. Dafür erhältst du 1 Fairy-Punkt."
      );
    });
  </script>
</body>
</html>
